{"version":3,"file":"global-heading.min.js","sources":["../../src/customizer/global-heading.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n/**\n * Theme customizer global-heading js\n * @copyright (c) 2023 WisdmLabs (https://wisdmlabs.com/) <support@wisdmlabs.com>\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author    Yogesh Shirsath\n */\n\nimport $ from 'jquery';\nimport Utils from 'theme_remui/customizer/utils';\n\n/**\n * Headings list\n */\nvar headings = ['all', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'];\n\n/**\n * Selectors\n */\nvar SELECTOR = {\n    HEADING: 'typography-heading'\n};\n\n// Add heading in selector.\nheadings.forEach(function(heading) {\n    SELECTOR['FONTFAMILY' + heading] = `[name=\"typography-heading-${heading}-fontfamily\"]`;\n    SELECTOR['FONTSIZE' + heading] = `typography-heading-${heading}-fontsize`;\n    // SELECTOR['FONTWEIGHT' + heading] = `[name=\"typography-heading-${heading}-fontweight\"]`;\n    SELECTOR['TEXTTRANSFORM' + heading] = `[name=\"typography-heading-${heading}-text-transform\"]`;\n    SELECTOR['LINEHEIGHT' + heading] = `[name=\"typography-heading-${heading}-lineheight\"]`;\n    SELECTOR['CUSTOMCOLOR' + heading] = `[name=\"typography-heading-${heading}-custom-color\"]`;\n    SELECTOR['TEXTCOLOR' + heading] = `[name=\"typography-heading-${heading}-textcolor\"]`;\n});\n\n/**\n * Get site heading content.\n * @param {string} heading Heading tag\n * @return {string} site color content\n */\nfunction getContent(heading) {\n    let fontSize;\n    let fontFamily = $(SELECTOR['FONTFAMILY' + heading]).val();\n    if (fontFamily.toLowerCase() == 'inherit') {\n        fontFamily = $(SELECTOR.FONTFAMILYall).val();\n    }\n\n    let tags = [heading, '.' + heading];\n\n    let num = heading.replace('h', '');\n    ['regular', 'semibold', 'bold', 'exbold']\n    .forEach(type => {\n        tags.push(`.h-${type}-${num}`);\n    });\n\n    let tag = tags.join(', ');\n    let content = '';\n\n    if (fontFamily.toLowerCase() != 'inherit') {\n        Utils.loadFont(fontFamily);\n    }\n\n    content += `\\n\n        ${tag} {\n    `;\n\n    if (fontFamily.toLowerCase() != 'inherit') {\n        content += `\\nfont-family: \"${fontFamily}\",sans-serif !important;`;\n    }\n\n    fontSize = $(`[name=\"${SELECTOR['FONTSIZE' + heading]}\"]`).val();\n    content += `\\nfont-size: ${fontSize}rem;`;\n\n    // let fontWeight = $(SELECTOR['FONTWEIGHT' + heading]).val();\n    // if (fontWeight.toLowerCase() != 'inherit') {\n    //     content += `\\nfont-weight: ${fontWeight};`;\n    // }\n\n    let textTransform = $(SELECTOR['TEXTTRANSFORM' + heading]).val();\n    if (textTransform.toLowerCase() == 'inherit') {\n        textTransform = $(SELECTOR.TEXTTRANSFORMall).val();\n    }\n    if (textTransform.toLowerCase() != 'inherit') {\n        content += `\\ntext-transform: ${textTransform};`;\n    }\n\n    let lineHeight = $(SELECTOR['LINEHEIGHT' + heading]).val();\n    if (lineHeight != '') {\n        content += `\\nline-height: ${lineHeight};`;\n    }\n\n    let customcolor = $(SELECTOR['CUSTOMCOLOR' + heading]).is(':checked');\n    if (customcolor == true) {\n        $(SELECTOR['TEXTCOLOR' + heading]).closest('.setting-item').slideDown(100);\n    } else {\n        $(SELECTOR['TEXTCOLOR' + heading]).closest('.setting-item').slideUp(100);\n    }\n\n    let textColor = $(SELECTOR.TEXTCOLORall).val();\n    if (customcolor == true) {\n        textColor = $(SELECTOR['TEXTCOLOR' + heading]).val();\n    }\n\n    content += `\\ncolor: ${textColor} !important;\n    }`;\n\n    // Tablet.\n    fontSize = $(`[name='${SELECTOR['FONTSIZE' + heading]}-tablet']`).val();\n    if (fontSize != '') {\n        content += `\\n\n            @media screen and (min-width: ${Utils.deviceWidth.sm + 1}px)\n            and (max-width: ${Utils.deviceWidth.md}px) {\n                ${tag} {\n                    font-size: ${fontSize}rem;\n                }\n            }\n        `;\n    }\n    return content;\n}\n\n/**\n * Apply settings.\n */\nfunction apply() {\n    headings.forEach(function(heading) {\n        if (heading == 'all') {\n            return;\n        }\n        Utils.putStyle(SELECTOR.HEADING + heading, getContent(heading));\n    });\n}\n\n/**\n * Initialize events.\n */\nfunction init() {\n    var select = [];\n    var color = [];\n    headings.forEach(function(heading) {\n        select.push(`\n            ${SELECTOR['FONTFAMILY' + heading]},\n            [name='${SELECTOR['FONTSIZE' + heading]}'],\n            [name='${SELECTOR['FONTSIZE' + heading]}-tablet'],\n            [name='${SELECTOR['FONTSIZE' + heading]}-mobile'],\n            ${SELECTOR['TEXTTRANSFORM' + heading]},\n            ${SELECTOR['LINEHEIGHT' + heading]},\n            ${SELECTOR['CUSTOMCOLOR' + heading]}\n        `);\n        color.push(SELECTOR['TEXTCOLOR' + heading]);\n    });\n\n    $(select.join(', ')).on('input', function() {\n        let heading = $(this).attr('name').split('-').splice(2, 1)[0];\n        if (heading == 'all') {\n            apply();\n            return;\n        }\n        Utils.putStyle(SELECTOR.HEADING + heading, getContent(heading));\n    });\n\n    $(color.join(', ')).on('color.changed', function() {\n        let heading = $(this).attr('name').split('-').splice(2, 1)[0];\n        if (heading == 'all') {\n            apply();\n            return;\n        }\n        Utils.putStyle(SELECTOR.HEADING + heading, getContent(heading));\n    });\n}\n\nexport default {\n    init,\n    apply\n};\n"],"names":["headings","SELECTOR","HEADING","getContent","heading","fontSize","fontFamily","val","toLowerCase","FONTFAMILYall","tags","num","replace","forEach","type","push","tag","join","content","loadFont","textTransform","TEXTTRANSFORMall","lineHeight","customcolor","is","closest","slideDown","slideUp","textColor","TEXTCOLORall","Utils","deviceWidth","sm","md","apply","putStyle","init","select","color","on","this","attr","split","splice"],"mappings":";;;;;;uKA4BIA,SAAW,CAAC,MAAO,KAAM,KAAM,KAAM,KAAM,KAAM,MAKjDC,SAAW,CACXC,QAAS,+BAmBJC,WAAWC,aACZC,SACAC,YAAa,mBAAEL,SAAS,aAAeG,UAAUG,MACrB,WAA5BD,WAAWE,gBACXF,YAAa,mBAAEL,SAASQ,eAAeF,WAGvCG,KAAO,CAACN,QAAS,IAAMA,SAEvBO,IAAMP,QAAQQ,QAAQ,IAAK,KAC9B,UAAW,WAAY,OAAQ,UAC/BC,SAAQC,OACLJ,KAAKK,kBAAWD,iBAAQH,aAGxBK,IAAMN,KAAKO,KAAK,MAChBC,QAAU,GAEkB,WAA5BZ,WAAWE,8BACLW,SAASb,YAGnBY,+BACMF,gBAG0B,WAA5BV,WAAWE,gBACXU,mCAA8BZ,wCAGlCD,UAAW,oCAAYJ,SAAS,WAAaG,gBAAcG,MAC3DW,gCAA2Bb,qBAOvBe,eAAgB,mBAAEnB,SAAS,gBAAkBG,UAAUG,MACxB,WAA/Ba,cAAcZ,gBACdY,eAAgB,mBAAEnB,SAASoB,kBAAkBd,OAEd,WAA/Ba,cAAcZ,gBACdU,qCAAgCE,wBAGhCE,YAAa,mBAAErB,SAAS,aAAeG,UAAUG,MACnC,IAAde,aACAJ,kCAA6BI,qBAG7BC,aAAc,mBAAEtB,SAAS,cAAgBG,UAAUoB,GAAG,YACvC,GAAfD,gCACEtB,SAAS,YAAcG,UAAUqB,QAAQ,iBAAiBC,UAAU,yBAEpEzB,SAAS,YAAcG,UAAUqB,QAAQ,iBAAiBE,QAAQ,SAGpEC,WAAY,mBAAE3B,SAAS4B,cAActB,aACtB,GAAfgB,cACAK,WAAY,mBAAE3B,SAAS,YAAcG,UAAUG,OAGnDW,4BAAuBU,iCAIvBvB,UAAW,oCAAYJ,SAAS,WAAaG,uBAAqBG,MAClD,IAAZF,WACAa,iEACoCY,eAAMC,YAAYC,GAAK,8CACrCF,eAAMC,YAAYE,qCAC9BjB,kDACeX,8DAKtBa,iBAMFgB,QACLlC,SAASa,SAAQ,SAAST,SACP,OAAXA,wBAGE+B,SAASlC,SAASC,QAAUE,QAASD,WAAWC,aAxG9DJ,SAASa,SAAQ,SAAST,SACtBH,SAAS,aAAeG,6CAAwCA,yBAChEH,SAAS,WAAaG,sCAAiCA,qBAEvDH,SAAS,gBAAkBG,6CAAwCA,6BACnEH,SAAS,aAAeG,6CAAwCA,yBAChEH,SAAS,cAAgBG,6CAAwCA,2BACjEH,SAAS,YAAcG,6CAAwCA,wCA2IpD,CACXgC,oBAnCIC,OAAS,GACTC,MAAQ,GACZtC,SAASa,SAAQ,SAAST,SACtBiC,OAAOtB,6BACDd,SAAS,aAAeG,0CACjBH,SAAS,WAAaG,4CACtBH,SAAS,WAAaG,mDACtBH,SAAS,WAAaG,4CAC7BH,SAAS,gBAAkBG,mCAC3BH,SAAS,aAAeG,mCACxBH,SAAS,cAAgBG,wBAE/BkC,MAAMvB,KAAKd,SAAS,YAAcG,iCAGpCiC,OAAOpB,KAAK,OAAOsB,GAAG,SAAS,eACzBnC,SAAU,mBAAEoC,MAAMC,KAAK,QAAQC,MAAM,KAAKC,OAAO,EAAG,GAAG,GAC5C,OAAXvC,uBAIE+B,SAASlC,SAASC,QAAUE,QAASD,WAAWC,UAHlD8B,+BAMNI,MAAMrB,KAAK,OAAOsB,GAAG,iBAAiB,eAChCnC,SAAU,mBAAEoC,MAAMC,KAAK,QAAQC,MAAM,KAAKC,OAAO,EAAG,GAAG,GAC5C,OAAXvC,uBAIE+B,SAASlC,SAASC,QAAUE,QAASD,WAAWC,UAHlD8B,YASRA,MAAAA"}