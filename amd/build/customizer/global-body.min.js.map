{"version":3,"file":"global-body.min.js","sources":["../../src/customizer/global-body.js"],"sourcesContent":["/* eslint-disable no-console, no-unused-vars */\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n/**\n * Theme customizer global-body js\n * @copyright (c) 2023 WisdmLabs (https://wisdmlabs.com/) <support@wisdmlabs.com>\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author    Yogesh Shirsath\n */\n\nimport $ from 'jquery';\nimport Utils from 'theme_remui/customizer/utils';\n\nvar SELECTOR = {\n    BASE: 'global-typography-body',\n    FONTFAMILY: '[name=\"global-typography-body-fontfamily\"]',\n    FONTSIZE: 'global-typography-body-fontsize',\n    FONTWEIGHT: '[name=\"global-typography-body-fontweight\"]',\n    LINEHEIGHT: '[name=\"global-typography-body-lineheight\"]',\n    TEXTTRANSFORM: '[name=\"global-typography-body-text-transform\"]',\n    LETTERSPACING: '[name=\"global-typography-body-letterspacing\"]',\n    LINK: '[name=\"enablebodysettingslinking\"]',\n    SMALLPARAFONTFAMILY: '[name=\"global-typography-smallpara-fontfamily\"]',\n    SMALLPARAFONTSIZE: 'global-typography-smallpara-fontsize',\n    SMALLPARALINEHEIGHT: '[name=\"global-typography-smallpara-lineheight\"]',\n    SMALLPARATEXTTRANSFORM: '[name=\"global-typography-smallpara-text-transform\"]',\n    SMALLPARALETTERSPACING: '[name=\"global-typography-smallpara-letterspacing\"]',\n    SMALLINFOFONTFAMILY: '[name=\"global-typography-smallinfo-fontfamily\"]',\n    SMALLINFOFONTSIZE: 'global-typography-smallinfo-fontsize',\n    SMALLINFOLINEHEIGHT: '[name=\"global-typography-smallinfo-lineheight\"]',\n    SMALLINFOTEXTTRANSFORM: '[name=\"global-typography-smallinfo-text-transform\"]',\n    SMALLINFOLETTERSPACING: '[name=\"global-typography-smallinfo-letterspacing\"]',\n    LAYOUT: '[name=\"pagewidth\"]'\n};\n\n// Check whether settings are linked.\nlet isLinked = () => $(SELECTOR.LINK).is(':checked');\n\n/**\n * Get global font name.\n * @return {String} Font name\n */\nfunction getGlobalFont() {\n    let fontFamily = $(SELECTOR.FONTFAMILY).val();\n    if (fontFamily.toLocaleLowerCase() == 'standard') {\n        fontFamily = 'Inter';\n    }\n    if (fontFamily.toLocaleLowerCase() == 'inherit') {\n        // eslint-disable-next-line no-undef\n        if (remuiFontSelect == 1) {\n            return 'Inter';\n        }\n        // eslint-disable-next-line no-undef\n        if (remuiFontName == '') {\n            return 'Inter';\n        }\n        // eslint-disable-next-line no-undef\n        return remuiFontName;\n    }\n    return fontFamily;\n}\n\n/**\n * Load font.\n * @param {string} font Font name\n */\nfunction handleFont(font) {\n    if (font.toLocaleLowerCase() == 'inherit') {\n        return;\n    }\n    Utils.loadFont(font);\n}\n\n/**\n * Handle site body content.\n */\nfunction handleBody() {\n    let fontFamily = getGlobalFont(),\n    fontSize = {\n       'default': $(`[name='${SELECTOR.FONTSIZE}']`).val(),\n       'tablet': $(`[name='${SELECTOR.FONTSIZE}-tablet']`).val(),\n       'mobile': $(`[name='${SELECTOR.FONTSIZE}-mobile']`).val()\n    },\n    fontWeight = $(SELECTOR.FONTWEIGHT).val(),\n    textTransform = $(SELECTOR.TEXTTRANSFORM).val(),\n    lineHeight = $(SELECTOR.LINEHEIGHT).val(),\n    letterSpacing = $(SELECTOR.LETTERSPACING).val();\n    letterSpacing = letterSpacing == '' ? 0 : letterSpacing;\n\n    if (isLinked()) {\n        updateLinkedSettings();\n    }\n    let content = `\n        body {\n            font-size: ${fontSize.default}px !important;\n            text-transform: ${textTransform} !important;\n            font-family: \"${fontFamily}\",sans-serif !important;\n            line-height: ${lineHeight} !important;\n            font-weight: ${fontWeight} !important;\n            letter-spacing: ${letterSpacing}rem !important;\n        }\n    `;\n\n    // Tablet.\n    if (fontSize.tablet != '') {\n        content += `\\n\n            @media screen and (min-width: ${Utils.deviceWidth.sm + 1}px) and (max-width: ${Utils.deviceWidth.md}px) {\n                body {\n                    font-size: ${fontSize.tablet}px !important;\n                }\n            }\n        `;\n    }\n\n    // Mobile.\n    if (fontSize.mobile != '') {\n        content += `\\n\n            @media screen and (max-width: ${Utils.deviceWidth.sm}px) {\n                body {\n                    font-size: ${fontSize.mobile}px !important;\n                }\n            }\n        `;\n    }\n    Utils.putStyle('global-body', content);\n    handleFont(fontFamily);\n}\n\n/**\n * Handle small info text content.\n */\nfunction handleSmallParagraph() {\n    let fontFamily, fontSize, textTransform, lineHeight, letterSpacing;\n    fontFamily = $(SELECTOR.SMALLPARAFONTFAMILY).val();\n    if (fontFamily.toLowerCase() == 'standard') {\n        fontFamily = 'Inter';\n    }\n    fontSize = {\n        'default': $(`[name='${SELECTOR.SMALLPARAFONTSIZE}']`).val(),\n        'tablet': $(`[name='${SELECTOR.SMALLPARAFONTSIZE}-tablet']`).val(),\n        'mobile': $(`[name='${SELECTOR.SMALLPARAFONTSIZE}-mobile']`).val()\n    };\n    textTransform = $(SELECTOR.SMALLPARATEXTTRANSFORM).val();\n    lineHeight = $(SELECTOR.SMALLPARALINEHEIGHT).val();\n    letterSpacing = $(SELECTOR.SMALLPARALETTERSPACING).val();\n    letterSpacing = letterSpacing == '' ? 0 : letterSpacing;\n\n    handleFont(fontFamily);\n    let content = `\n        .para-regular-2,\n        .para-semibold-2,\n        .para-underline-2 {\n            font-family: ${fontFamily} !important;\n            font-size: ${fontSize.default}px !important;\n            text-transform: ${textTransform} !important;\n            line-height: ${lineHeight} !important;\n            letter-spacing: ${letterSpacing}rem !important;\n        }\n    `;\n\n    // Tablet.\n    if (fontSize.tablet != '') {\n        content += `\\n\n            @media screen and (min-width: ${Utils.deviceWidth.sm + 1}px) and (max-width: ${Utils.deviceWidth.md}px) {\n                .para-regular-2,\n                .para-semibold-2,\n                .para-underline-2 {\n                    font-size: ${fontSize.tablet}px !important;\n                }\n            }\n        `;\n    }\n\n    // Mobile.\n    if (fontSize.mobile != '') {\n        content += `\\n\n            @media screen and (max-width: ${Utils.deviceWidth.sm}px) {\n                .para-regular-2,\n                .para-semibold-2,\n                .para-underline-2 {\n                    font-size: ${fontSize.mobile}px !important;\n                }\n            }\n        `;\n    }\n    Utils.putStyle('global-small-paragraph', content);\n}\n\n/**\n * Handle small paragraph content.\n */\nfunction handleSmallInfoText() {\n    let fontFamily, fontSize, textTransform, lineHeight, letterSpacing;\n    fontFamily = $(SELECTOR.SMALLINFOFONTFAMILY).val();\n    if (fontFamily.toLowerCase() == 'standard') {\n        fontFamily = 'Inter';\n    }\n    fontSize = {\n        'default': $(`[name='${SELECTOR.SMALLINFOFONTSIZE}']`).val(),\n        'tablet': $(`[name='${SELECTOR.SMALLINFOFONTSIZE}-tablet']`).val(),\n        'mobile': $(`[name='${SELECTOR.SMALLINFOFONTSIZE}-mobile']`).val()\n    };\n    textTransform = $(SELECTOR.SMALLINFOTEXTTRANSFORM).val();\n    lineHeight = $(SELECTOR.SMALLINFOLINEHEIGHT).val();\n    letterSpacing = $(SELECTOR.SMALLINFOLETTERSPACING).val();\n    letterSpacing = letterSpacing == '' ? 0 : letterSpacing;\n    handleFont(fontFamily);\n\n    let content = `\n        .small-info-regular,\n        .small-info-semibold,\n        #page-header #page-navbar nav ol.breadcrumb .breadcrumb-item,\n        .edw-msg-panel-badge,\n        .message-app .view-conversation .content-message-container [data-region=\"day-messages-container\"] [data-region=\"text-container\"] p {\n            font-family: ${fontFamily} !important;\n            font-size: ${fontSize.default}px !important;\n            text-transform: ${textTransform} !important;\n            line-height: ${lineHeight} !important;\n            letter-spacing: ${letterSpacing}rem !important;\n        }\n    `;\n\n    // Tablet.\n    if (fontSize.tablet != '') {\n        content += `\\n\n            @media screen and (min-width: ${Utils.deviceWidth.sm + 1}px) and (max-width: ${Utils.deviceWidth.md}px) {\n                .small-info-regular,\n                .small-info-semibold {\n                    font-size: ${fontSize.tablet}px !important;\n                }\n            }\n        `;\n    }\n\n    // Mobile.\n    if (fontSize.mobile != '') {\n        content += `\\n\n            @media screen and (max-width: ${Utils.deviceWidth.sm}px) {\n                .small-info-regular,\n                .small-info-semibold {\n                    font-size: ${fontSize.mobile}px !important;\n                }\n            }\n        `;\n    }\n    Utils.putStyle('global-small-info', content);\n}\n\n/**\n * Update linked settings.\n */\nfunction updateLinkedSettings() {\n    // Small paragraph.\n    $(`[name=\"${SELECTOR.SMALLPARAFONTSIZE}\"]`).val($(`[name=\"${SELECTOR.FONTSIZE}\"]`).val() - 2);\n    $(`[name=\"${SELECTOR.SMALLPARAFONTSIZE}-tablet\"]`).val($(`[name=\"${SELECTOR.FONTSIZE}-tablet\"]`).val() - 2);\n    $(`[name=\"${SELECTOR.SMALLPARAFONTSIZE}-mobile\"]`).val($(`[name=\"${SELECTOR.FONTSIZE}-mobile\"]`).val() - 2);\n    $(SELECTOR.SMALLPARAFONTFAMILY).val('inherit');\n    $(SELECTOR.SMALLPARALINEHEIGHT).val($(SELECTOR.LINEHEIGHT).val());\n    $(SELECTOR.SMALLPARATEXTTRANSFORM).val('inherit');\n    $(SELECTOR.SMALLPARALETTERSPACING).val($(SELECTOR.LETTERSPACING).val());\n    handleSmallParagraph();\n\n    // Small info text.\n    $(`[name=\"${SELECTOR.SMALLINFOFONTSIZE}\"]`).val($(`[name=\"${SELECTOR.FONTSIZE}\"]`).val() - 4);\n    $(`[name=\"${SELECTOR.SMALLINFOFONTSIZE}-tablet\"]`).val($(`[name=\"${SELECTOR.FONTSIZE}-tablet\"]`).val() - 4);\n    $(`[name=\"${SELECTOR.SMALLINFOFONTSIZE}-mobile\"]`).val($(`[name=\"${SELECTOR.FONTSIZE}-mobile\"]`).val() - 4);\n    $(SELECTOR.SMALLINFOFONTFAMILY).val('inherit');\n    $(SELECTOR.SMALLINFOLINEHEIGHT).val($(SELECTOR.LINEHEIGHT).val());\n    $(SELECTOR.SMALLINFOTEXTTRANSFORM).val('inherit');\n    $(SELECTOR.SMALLINFOLETTERSPACING).val($(SELECTOR.LETTERSPACING).val());\n    handleSmallInfoText();\n}\n\n/**\n * Handling settings linking.\n */\nfunction handleLinking() {\n    $(`\n        #heading_smallpara-font,\n        #heading_smallinfo-font\n    `).find('.form-group').toggleClass('linked-setting', isLinked())\n    .attr('title', isLinked() ? M.util.get_string('bodysettingslinked', 'theme_remui') : '');\n    if (isLinked()) {\n        updateLinkedSettings();\n    }\n}\n\n/**\n * Handle page layout.\n */\nfunction handleLayout() {\n    let body = $(Utils.getDocument()).find('body');\n    if (body.is('#page-site-index')) {\n        body.removeClass('limitedwidth');\n        return;\n    }\n    $(body).toggleClass('limitedwidth', $(SELECTOR.LAYOUT).val() == 'default');\n}\n\n/**\n * Apply settings.\n */\nfunction apply() {\n    handleBody();\n    handleSmallParagraph();\n    handleSmallInfoText();\n    handleLayout();\n}\n\n/**\n * Initialize events.\n */\nfunction init() {\n    $(`\n        [name='${SELECTOR.FONTSIZE}'],\n        [name='${SELECTOR.FONTSIZE}-tablet'],\n        [name='${SELECTOR.FONTSIZE}-mobile']\n    `).on('input', handleBody);\n\n    $(`\n        ${SELECTOR.FONTWEIGHT},\n        ${SELECTOR.TEXTTRANSFORM},\n        ${SELECTOR.LETTERSPACING},\n        ${SELECTOR.LINEHEIGHT},\n        ${SELECTOR.FONTFAMILY}\n    `).on('input', handleBody);\n\n    // Handle small paragraph settings.\n    $(`\n        [name='${SELECTOR.SMALLPARAFONTSIZE}'],\n        [name='${SELECTOR.SMALLPARAFONTSIZE}-tablet'],\n        [name='${SELECTOR.SMALLPARAFONTSIZE}-mobile'],\n        ${SELECTOR.SMALLPARATEXTTRANSFORM},\n        ${SELECTOR.SMALLPARALETTERSPACING},\n        ${SELECTOR.SMALLPARALINEHEIGHT},\n        ${SELECTOR.SMALLPARAFONTFAMILY}\n    `).on('input', handleSmallParagraph);\n\n    // Handle small info text settings.\n    $(`\n        [name='${SELECTOR.SMALLINFOFONTSIZE}'],\n        [name='${SELECTOR.SMALLINFOFONTSIZE}-tablet'],\n        [name='${SELECTOR.SMALLINFOFONTSIZE}-mobile'],\n        ${SELECTOR.SMALLINFOTEXTTRANSFORM},\n        ${SELECTOR.SMALLINFOLETTERSPACING},\n        ${SELECTOR.SMALLINFOLINEHEIGHT},\n        ${SELECTOR.SMALLINFOFONTFAMILY}\n    `).on('input', handleSmallInfoText);\n\n    // Handle link setting switch.\n    $(SELECTOR.LINK).on('input', handleLinking);\n\n    // Handle layout.\n    $(SELECTOR.LAYOUT).on('change', handleLayout);\n\n    handleLinking();\n}\n\nexport default {\n    init,\n    apply\n};\n"],"names":["SELECTOR","isLinked","is","handleFont","font","toLocaleLowerCase","loadFont","handleBody","fontFamily","val","remuiFontSelect","remuiFontName","getGlobalFont","fontSize","fontWeight","textTransform","lineHeight","letterSpacing","updateLinkedSettings","content","default","tablet","Utils","deviceWidth","sm","md","mobile","putStyle","handleSmallParagraph","toLowerCase","handleSmallInfoText","handleLinking","find","toggleClass","attr","M","util","get_string","handleLayout","body","getDocument","removeClass","init","on","apply"],"mappings":"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"}